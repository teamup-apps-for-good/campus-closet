<div id="form-container">
  <%= form_with(model: time_slot) do |form| %>
    <% if time_slot.errors.any? %>
      <div style="color: red">
        <h2><%= pluralize(time_slot.errors.count, "error") %> prohibited this time_slot from being saved:</h2>

        <ul>
          <% time_slot.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
    <div>
      <%= form.label :start_time, style: "display: block" %>
      <%= form.datetime_field :start_time %>
    </div>

    <div>
      <%= form.label :end_time, style: "display: block" %>
      <%= form.datetime_field :end_time %>
    </div>
  <% end %>
</div>

<!-- Add button to add another time slot -->
<button id="add-time-slot">Add Another Time Slot</button>

<!-- Button to submit all time slots -->
<button id="submit-time-slots">Create Time Slots</button>

<!-- JavaScript to duplicate the form section -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('add-time-slot').addEventListener('click', function() {
      var formSection = document.querySelector('#form-container form').cloneNode(true);
      var deleteButton = document.createElement('button');
      deleteButton.textContent = 'Delete Time Slot';
      deleteButton.addEventListener('click', function() {
        formSection.remove();
      });
      formSection.appendChild(deleteButton);
      document.getElementById('form-container').appendChild(formSection);
    });

    document.getElementById('submit-time-slots').addEventListener('click', function() {
      var formSections = document.querySelectorAll('#form-container form');
      formSections.forEach(function(form) {
        form.submit();
      });
    });
  });
</script>
